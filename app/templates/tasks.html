{% extends 'base.html' %}
{% block content %}
<h1>Minhas Tarefas</h1>

<a href="{{ url_for('create_task') }}">Criar Nova Tarefa</a>

<table border="1" cellpadding="5">
    <tr>
        <th>Título</th>
        <th>Descrição</th>
        <th>Status</th>
        <th>Usuário</th>
        <th>Ações</th>
    </tr>
    {% for task in tasks %}
    <tr>
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.user.name }}</td>
        <td>
            <form action="{{ url_for('update_task_status', task_id=task.id) }}" method="post" style="display:inline;">
                <button type="submit">
                    {% if task.status == 'Pendente' %}
                        Concluir
                    {% else %}
                        Reabrir
                    {% endif %}
                </button>
            </form>
            <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post" style="display:inline;" onsubmit="return confirm('Confirma exclusão?');">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit">Excluir</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
